% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/export_records_between.R
\name{rc_export_records_between_with_groups}
\alias{rc_export_records_between_with_groups}
\title{Export REDCap Records Between Two Dates (With Grouped Retrieval)}
\usage{
rc_export_records_between_with_groups(
  record_id = "record_id",
  start_date = NULL,
  end_date = NULL
)
}
\arguments{
\item{record_id}{Character. The name of the record ID field in the REDCap
project. Defaults to \code{"record_id"}.}

\item{start_date}{Character or \code{Date}. The start date used to filter records.
If \code{NULL} (default), the origin date \code{"2022-06-01"} is used.}

\item{end_date}{Character or \code{Date}. The end date used to filter records.
If \code{NULL}, defaults to today's date (\code{lubridate::today()}).}
}
\value{
A \code{data.frame} containing the fully extracted and merged REDCap
records that fall within the specified date range.
}
\description{
This function extracts REDCap records whose survey timestamps fall between
a specified start and end date. It first performs a lightweight extraction
to identify eligible \code{record_id} values, then downloads the full records in
grouped batches using \code{rc_export_multiple_record_with_groups()}.
}
\details{
The function requires REDCap API configuration variables to be set via
environment variables (\code{RC_API_URL}, \code{RC_API_TOKEN}). If these are missing,
an error is raised.

The function performs the following steps:

\enumerate{
\item Retrieves timestamp-related variables using \code{rc_timestamp_var()}.
\item Performs a lightweight \code{record} export to obtain only record IDs and
timestamp fields.
\item Converts timestamp fields to \code{Date} format and harmonizes them using
\code{ctr_dates_reconciliation()}.
\item Filters records whose \code{date_survey} falls between \code{start_date} and
\code{end_date}.
\item Splits matching record IDs into blocks of 5,000 and extracts full
records using \code{rc_export_multiple_record_with_groups()}.
\item Combines all returned data into a single data frame.
}

All date comparisons are performed in R using standard \code{Date} objects.
}
\examples{
\dontrun{
# Export all records from 2023
rc_export_records_between_with_groups(
  start_date = "2023-01-01",
  end_date = "2023-12-31"
)

# Using a custom record_id field
rc_export_records_between_with_groups(
  record_id = "study_id",
  start_date = "2022-01-01"
)
}

}
\seealso{
\code{\link{rc_export_multiple_record_with_groups}},
\code{\link{rc_timestamp_var}},
\code{\link{ctr_dates_reconciliation}}
}
